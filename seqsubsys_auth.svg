<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="403px" preserveAspectRatio="none" style="width:1015px;height:403px;" version="1.1" viewBox="0 0 1015 403" width="1015px" zoomAndPan="magnify"><defs><filter height="300%" id="fxf4i06s42ojs" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="288.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="287.5" y="85.7266"/><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="41.6992" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="603.5" y="114.8594"/><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="88.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="603.5" y="256.5234"/><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="768.5" y="198.2578"/><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="947.5" y="285.6563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="107" x2="107" y1="54.5938" y2="391.9219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="292" x2="292" y1="54.5938" y2="391.9219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="608.5" x2="608.5" y1="54.5938" y2="391.9219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="773.5" x2="773.5" y1="54.5938" y2="391.9219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="952.5" x2="952.5" y1="54.5938" y2="391.9219"/><rect fill="#FEFECE" filter="url(#fxf4i06s42ojs)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="8" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="180" x="15" y="39.292">: Create Account Handling</text><rect fill="#FEFECE" filter="url(#fxf4i06s42ojs)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="216" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="135" x="223" y="22.9951">«subsystem proxy»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="236" y="39.292">: Authentication</text><rect fill="#FEFECE" filter="url(#fxf4i06s42ojs)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="566.5" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="573.5" y="39.292">: Account</text><rect fill="#FEFECE" filter="url(#fxf4i06s42ojs)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="222" x="660.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="734.5" y="22.9951">«external»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="208" x="667.5" y="39.292">: Werkzeug security packages</text><rect fill="#FEFECE" filter="url(#fxf4i06s42ojs)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="896.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="913.5" y="22.9951">«external»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="903.5" y="39.292">: SQLAlchemy</text><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="288.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="287.5" y="85.7266"/><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="41.6992" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="603.5" y="114.8594"/><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="88.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="603.5" y="256.5234"/><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="768.5" y="198.2578"/><rect fill="#FFFFFF" filter="url(#fxf4i06s42ojs)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="947.5" y="285.6563"/><polygon fill="#A80036" points="275.5,81.7266,285.5,85.7266,275.5,89.7266,279.5,85.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="281.5" y1="85.7266" y2="85.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="114" y="80.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="127" y="80.6606">// create account()</text><polygon fill="#A80036" points="591.5,110.8594,601.5,114.8594,591.5,118.8594,595.5,114.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297.5" x2="597.5" y1="114.8594" y2="114.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="304.5" y="109.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="317.5" y="109.7935">getUser(username)</text><polygon fill="#A80036" points="308.5,152.5586,298.5,156.5586,308.5,160.5586,304.5,156.5586" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="302.5" x2="607.5" y1="156.5586" y2="156.5586"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="314.5" y="151.4927">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="331.5" y="151.4927"/><path d="M52,127.8594 L52,167.8594 L278,167.8594 L278,137.8594 L268,127.8594 L52,127.8594 " fill="#FBFB77" filter="url(#fxf4i06s42ojs)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M268,127.8594 L268,137.8594 L278,137.8594 L268,127.8594 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="58" y="144.9263">If the user already exists,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="58" y="160.0591">refuse and mark as bad request</text><polygon fill="#A80036" points="756.5,194.2578,766.5,198.2578,756.5,202.2578,760.5,198.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297.5" x2="762.5" y1="198.2578" y2="198.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="304.5" y="193.1919">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="317.5" y="193.1919">getHash(password)</text><polygon fill="#A80036" points="308.5,223.3906,298.5,227.3906,308.5,231.3906,304.5,227.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="302.5" x2="772.5" y1="227.3906" y2="227.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="314.5" y="222.3247">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="327.5" y="222.3247">// return password hash</text><polygon fill="#A80036" points="591.5,252.5234,601.5,256.5234,591.5,260.5234,595.5,256.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297.5" x2="597.5" y1="256.5234" y2="256.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="304.5" y="251.4575">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="317.5" y="251.4575">createAccount(username, password_hash)</text><polygon fill="#A80036" points="935.5,281.6563,945.5,285.6563,935.5,289.6563,939.5,285.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="613.5" x2="941.5" y1="285.6563" y2="285.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="620.5" y="280.5903">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="633.5" y="280.5903">// send SQL query()</text><polygon fill="#A80036" points="308.5,340.7891,298.5,344.7891,308.5,348.7891,304.5,344.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="302.5" x2="607.5" y1="344.7891" y2="344.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="314.5" y="339.7231">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="327.5" y="339.7231">// success status</text><polygon fill="#A80036" points="118,369.9219,108,373.9219,118,377.9219,114,373.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="112" x2="291.5" y1="373.9219" y2="373.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124" y="368.856">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="141" y="368.856"/><!--MD5=[05661c13fb89c39ce8dfce84f9618669]
@startuml

autoactivate on
autonumber
hide footbox

participant ": Create Account Handling" as handler
participant ": Authentication" as auth <<subsystem proxy>>
participant ": Account" as acc
participant ": Werkzeug security packages" as werkzeug <<external>>
participant ": SQLAlchemy" as orm <<external>>

handler -> auth : // create account()
auth -> acc : getUser(username)
acc - -> auth
note left
    If the user already exists,
    refuse and mark as bad request
end note
auth -> werkzeug : getHash(password)
werkzeug - -> auth : // return password hash
auth -> acc : createAccount(username, password_hash)
acc -> orm : // send SQL query()
deactivate orm
acc - -> auth : // success status
auth - -> handler

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10-post-Ubuntu-0ubuntu1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>